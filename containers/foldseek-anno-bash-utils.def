Bootstrap: docker
From: alpine:3.18

%labels
    Author Luc Elliott
    Version 1.0
    Description Lightweight HPC-friendly container with Linux utilities

%environment
    export PATH=/usr/local/bin:$PATH
    export LANG=C.UTF-8

%post

    mkdir -p /usr/local/bin

    # Download static bash binary
    wget -O /usr/local/bin/bash https://github.com/robxu9/bash-static/releases/download/5.2.015-1.2.3-2/bash-linux-x86_64
    chmod +x /usr/local/bin/bash
    ln -s /usr/local/bin/bash /bin/bash

    # BusyBox static (many core utilities)
    wget -qO /usr/local/bin/busybox https://busybox.net/downloads/binaries/1.35.0-x86_64-linux-musl/busybox
    chmod +x /usr/local/bin/busybox
    for cmd in sh ls cp mv grep sed tar gzip; do
        ln -s /usr/local/bin/busybox /usr/local/bin/$cmd
    done




    # Static wget
    wget -qO /usr/local/bin/wget https://raw.githubusercontent.com/yunchih/static-binaries/master/wget
    chmod +x /usr/local/bin/wget


%runscript
    exec /bin/sh "$@"
